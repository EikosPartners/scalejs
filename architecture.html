<!DOCTYPE html>
<html>
<head>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="style/metro-bootstrap.min.css" />
  <link rel="stylesheet" href="style/metro-bootstrap-responsive.min.css" />
  <script src="style/jquery.min.js"></script>
  <script src="style/jquery.ui.widget.js"></script>
  <script src="style/metro.min.js"></script>
  <link rel="stylesheet" href="highlight.css" />

  <meta name="generator" content="DocPad v6.60.4" />
  <link  rel="stylesheet" href="highlight.css" />

  <style>
    header {
      height: 45px;
  }
  #content {
      overflow-y: scroll;
      padding-right: 20px;
      margin-left: 20px;
  }
  #sidebar {
      display: block;
      float: left;
      width: 300px;
      overflow-y: scroll;
      margin-right:20px;
  }
  body {
      overflow-y: hidden;
  }
  .metro h1 {
    color: #9a1616 !important;
}
.metro .sidebar>ul ul, .metro .sidebar>ul ul li a {
    background-color: #3d3d3d;
    border: 0px;
    color: #fff;
}

.metro h2, .metro h3 {
    margin: 30px 0 15px 0;
}
</style>

<script>
    function adjustHeight() {
        //adjust the height of the content and sidebar
        $("#content").outerHeight(window.innerHeight -45);
        $("#sidebar").outerHeight(window.innerHeight -45);
    }

    $(document).ready(function() {
        var path = window.location.pathname.replace("/scalejs/scalejs-docs/out","");

        //make selected page active on sidebar
        $("a[href='." + path +"']").parent().addClass("active");

        adjustHeight();
        $(window).resize(adjustHeight);

        //create code highlighting
        $('pre').each(function() {
            $(this).html($(this).html().replace(/!!\*/g, "<i style='background-color:#FFFF99'>").replace(/\*\*!/g, "</i>"));
        });

        console.log(path);
        //expand grid if it is grid
        if(path === '/grid1.html' || path === '/grid2.html' || path=='/grid3.html') $('#grid-dropdown').css("display","block");
    });

</script>
</head>
<body class="metro">

    <header>
        <nav class="navigation-bar dark fixed-top">
    <div class="navigation-bar-content">
        <a href="./" class="element"><span class="icon-home"></span> SCALEJS</a>
        <span class="element-divider"></span>

        <a class="element1 pull-menu" href="#"></a>

        <ul class="element-menu no-desktop">
            <li>
                <a class="dropdown-toggle" href="#"><span class="icon-layers"></span> Docs</a>
                <ul class="dropdown-menu dark" data-role="dropdown">
                    <li>
                        <a href="#" class="dropdown-toggle">Getting Started</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./docs.html"><i class="icon-star-3"></i> Introduction</a></li>
                            <li><a href="./install.html"><i class="icon-download-2"></i> Install Scalejs</a></li>
                            <li><a href="./project.html"><i class="icon-new"></i> Create an Application Project</a></li>
                            <li><a href="./running.html"><i class="icon-play"></i> Running your  Application</a></li>
                            <!--<li><a href="./build.html"><i class="icon-cloud"></i> Build and Deployment</a></li>
                            <li><a href="./test.html"><i class="icon-checkmark"></i> Testing</a></li>
                            <li><a href="./best.html"><i class="icon-thumbs-up"></i> Best Practices</a></li>-->
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">Overview</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./template.html"><i class="icon-clipboard-2"></i> Project Template</a></li>
                            <li><a href="./architecture.html"><i class="icon-puzzle"></i> Architecture</a></li>
                            <li><a href="./mvvm.html"><i class="icon-tree-view"></i> Model-View-ViewModel</a></li>
                            <li><a href="./statechart.html"><i class="icon-tab"></i> Statechart</a></li>
                            <li><a href="./routing.html"><i class="icon-share"></i> Routing</a></li>
                            <li><a href="./composition.html"><i class="icon-screen"></i> UI Composition</a></li>
                            <li><a href="./gridlayout.html"><i class="icon-grid-view"></i> Grid Layout</a></li>
                            <!-- <li><a href="./styles.html"><i class="icon-droplet"></i> Styles</a></li>
                            <li><a href="./extensions.html"><i class="icon-wrench"></i> Extensions</a></li>
                            <li><a href="./api.html"><i class="icon-book"></i> API Documentation</a></li>-->
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">UI Components</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li>
                                <a class="dropdown-toggle" href=""><i class="icon-grid"></i> Grid</a>
                                <ul class="dropdown-menu" data-role="dropdown">
                                    <li><a href="./grid1.html">Introduction</a></li>
                                    <li><a href="./grid2.html">Filtering</a></li>
                                    <li><a href="./grid3.html">Sorting</a></li>
                                </ul>
                            </li>
                            <li><a href="./autocomplete.html"><i class="icon-search"></i> Autocomplete</a></li>
                            <li><a href="./visualization.html"><i class="icon-target"></i> Visualization</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">Tutorials</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./todomvc.html">ToDoMVC</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">Documentation</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./scalejs-doc/index.html">scalejs</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="divider"></li>
            <li><a title="Visual Studio Gallery" href="http://visualstudiogallery.msdn.microsoft.com/2a3d0050-ccab-458f-8bfc-2f2aca73e631"><span class="icon-box-add"></span> Visual Studio</a></li>
            <li class="divider"></li>
            <li><a title="GitHub" href="https://github.com/lisovin/scalejs/tree/master"><span class="icon-github-3"></span> GitHub</a></li>
        </ul>

        <div class="no-tablet-portrait no-phone">
            <a href="./docs.html" class="element"><span class="icon-layers"></span> Docs</a>
            <span class="element-divider"></span>

            <a title="Visual Studio Gallery" href="http://visualstudiogallery.msdn.microsoft.com/2a3d0050-ccab-458f-8bfc-2f2aca73e631" class="element place-right"><span class="icon-box-add"></span> Visual Studio</a>
            <span class="element-divider place-right"></span>

            <a title="GitHub" href="https://github.com/lisovin/scalejs/tree/master" class="element place-right"><span class="icon-github-3"></span> GitHub</a>
            <span class="element-divider place-right"></span>
        </div>
    </div>
</nav>

    </header>

    <div id="container">

        <div id="sidebar" class="sidebar no-tablet-portrait no-phone">
            <ul>
                <li class="title">Getting Started</li>
                <li><a href="./docs.html"><i class="icon-star-3"></i> Introduction</a></li>
                <li><a href="./install.html"><i class="icon-download-2"></i> Install Scalejs</a></li>
                <li><a href="./project.html"><i class="icon-new"></i> Create an Application Project</a></li>
                <li><a href="./running.html"><i class="icon-play"></i> Running your  Application</a></li>
                <!--<li><a href="./build.html"><i class="icon-cloud"></i> Build and Deployment</a></li>
                <li><a href="./test.html"><i class="icon-checkmark"></i> Testing</a></li>
                <li><a href="./best.html"><i class="icon-thumbs-up"></i> Best Practices</a></li>-->
                <li class="title">Overview</li>
                <li><a href="./template.html"><i class="icon-clipboard-2"></i> Project Template</a></li>
                <li><a href="./architecture.html"><i class="icon-puzzle"></i> Architecture</a></li>
                <li><a href="./mvvm.html"><i class="icon-tree-view"></i> Model-View-ViewModel</a></li>
                <li><a href="./statechart.html"><i class="icon-tab"></i> Statechart</a></li>
                <li><a href="./routing.html"><i class="icon-share"></i> Routing</a></li>
                <li><a href="./composition.html"><i class="icon-screen"></i> UI Composition</a></li>
                <li><a href="./gridlayout.html"><i class="icon-grid-view"></i> Layout</a></li>
                <!--<li><a href="./styles.html"><i class="icon-droplet"></i> Styles</a></li>
                <li><a href="./extensions.html"><i class="icon-wrench"></i> Extensions</a></li>
                <li><a href="./api.html"><i class="icon-book"></i> API Documentation</a></li>-->
                <li class="title">UI Components</li>
                <li>
                    <a class="dropdown-toggle" href=""><i class="icon-grid"></i> Data Grid</a>
                    <ul id="grid-dropdown" class="dropdown-menu" data-role="dropdown">
                        <li><a href="./grid1.html">Introduction</a></li>
                        <li><a href="./grid2.html">Filtering</a></li>
                        <li><a href="./grid3.html">Sorting</a></li>
                    </ul>
                </li>
                <li><a href="./autocomplete.html"><i class="icon-search"></i> Autocomplete</a></li>
                <li><a href="./visualization.html"><i class="icon-target"></i> Visualization</a></li>
                <li class="title">Tutorials</li>
                <li><a href="./todomvc.html">ToDoMVC</a></li>
                <li class="title">Documentation</li>
                <li><a href="./scalejs-doc/index.html">ScaleJS</a></li>
            </ul>
        </div>

        <div id="content">
            <h1 id="architecture">Architecture</h1>
<hr>

<p>The architecture of your application is one the core freatures of scalejs. 
Scalejs application architecture was inspired by Nicholas Zakas&#39; <a href="http://www.slideshare.net/nzakas/scalable-javascript-application-architecture">Scalable JavaScript Application Architecure</a>
seminar. Scalejs took these concepts and implemented them. Along the way, minor adjustments to the
made, but overall, the architecture will follow what you see in the slides.</p>
<h2 id="core">Core</h2>
<p>The core of the application has only two responsibilities:</p>
<ol>
<li>Abstracting functions away from base libraries</li>
<li>Registering and Starting Modules</li>
</ol>
<p>A visual representation of the core would look like this:</p>
<p><img src="./architecture1.png" alt="The core"></p>
<p>One of the major advantages of this pattern is that your application code is not closely coupled to base libraries.
For example, let&#39;s say we wanted to use a jQuery UI component like tabs.
In order to do that without scalejs, you would need to write your application in such a way that it would
directly interface with the jQuery UI API. The issue with this is that it is not maintainable or scalable. 
It is difficult to change or update the tab control without having to rewrite your application code as well.</p>
<p>This is why scalejs enforces the abstraction of base libraries away from the application. The application
will interface with the core and never with the base libraries themselves.</p>
<p>The application also is responsible for registering and starting modules. This is done in <strong>app.js</strong> in the app folder
for a scalejs project. It looks like this:</p>
<p><strong>app.js</strong></p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">/*global require*/</span>
<span class="hljs-built_in">require</span>([
    <span class="hljs-string">'scalejs!application/main'</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(
    application
)</span> {</span>
<span class="hljs-pi">    'use strict'</span>;

    application.run();
});
</code></pre>
<p>To add additional modules, you just need to append a comma and the name of the module to this string: <code>scalejs!application/main</code>. 
Scalejs uses requirejs plugins (that is what <code>scalejs!application</code> is) to register the modules; all you need to do is reference them.
The application is started using the <code>run</code> method. Before <code>run</code> happens, all of modules are registered and bootstrapped so that they are ready to run.</p>
<h2 id="modules">Modules</h2>
<p>A scalejs Module is a self-containing component of your application. Modules consist of one of more files that define the
behaviour of the component. Modules should be able to live on their own - with the exception being a module which is
in charge of the <a href="./layout.html">layout</a>, which will have the job of setting up regions for other modules to appear. 
Modules are loosely coupled with other modules, allowing you to develop, test, and change modules independently 
from others without affecting how the other modules function.</p>
<p>Each module has its own sandbox which gives the module access to core functions.
The sandbox is similar to the core in the way that it abstracts base libraries away from the app.
But it adds an additional step of security, because each function in the sandbox is a <em>copy</em>, and not
a direct reference to the original function. Since each module gets its own sandbox, which is its own
copy of functions for it to use, there is no possibility that a module will interfere with another module
by modifying the sandbox. </p>
<p><img src="./architecture2.png" alt="The core"></p>
<p>All modules also have access to an application-wide <a href="./statechart.html">statechart</a> which defines the flow
of the application. By using the statechart, a module can react to events from other modules, or access properties
of the state of the application. </p>
<p>Even though the scalejs core does not depend on the MVVM library, it is common that a developer will want to use MVVM.
If using <a href="./mvvm.html">MVVM</a>, each module will contain its own viewmodels, styles, views and bindings. </p>
<h2 id="sandbox">Sandbox</h2>
<p>The sandbox is the container for all of the functions and tools modules can make use of.
It is a consistent interface that provides everything a module needs. The sandbox can be extended with
<a href="./extension.html">extensions</a>. Functions within the sandbox live within the namespace of the extension
which created them. </p>
<pre class="highlight"><code class="hljs javascript">    <span class="hljs-keyword">var</span> <span class="hljs-comment">// imports</span>
            root = sandbox.mvvm.root,
            template = sandbox.mvvm.template,
            registerStates = sandbox.state.registerStates,
            state = sandbox.state.builder.state,
           onEntry = sandbox.state.builder.onEntry;
</code></pre>
<p>It is common in your files that to make use of the sandbox, create a new variable to reference the function you would
like to use. This is similar to &quot;importing&quot; the function like you would in Java or C#. This provides two immediate benefits:
you will always be aware of what functions from the sandbox you are using by looking at the beginning of the file,
and you won&#39;t have to write as much code in order to use a function which improves readability.</p>

        </div>

    </div>

</body>
</html>
