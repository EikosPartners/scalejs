define("scalejs",[],function(){var n;return{load:function(e,t,r,o){var i;return"extensions"===e?(o.scalejs&&o.scalejs.extensions?(n=o.scalejs.extensions,t(n,function(){r(Array.prototype.slice(arguments))})):t(["scalejs/extensions"],function(){r(Array.prototype.slice(arguments))},function(){r([])}),void 0):0===e.indexOf("application")?(i=e.substring("application".length+1).match(/([^,]+)/g)||[],i=i.map(function(n){return-1===n.indexOf("/")?"app/"+n+"/"+n+"Module":n}),i.push("scalejs/application"),t(["scalejs!extensions"],function(){t(i,function(){var n=arguments[arguments.length-1],e=Array.prototype.slice.call(arguments,0,arguments.length-1);o.isBuild||n.registerModules.apply(null,e),r(n)})}),void 0):(t(["scalejs/"+e],function(n){r(n)}),void 0)},write:function(e,t,r){"scalejs"===e&&0===t.indexOf("application")&&r('define("scalejs/extensions", '+JSON.stringify(n)+", function () { return Array.prototype.slice(arguments); })")}}}),define("scalejs/base.type",[],function(){function n(n){if(void 0===n)return"undefined";if(null===n)return"null";var e,t={}.toString.call(n).match(/\s([a-z|A-Z]+)/)[1].toLowerCase();return"object"!==t?t:(e=n.constructor.toString().match(/^function\s*([$A-Z_][0-9A-Z_$]*)/i),null===e?"object":e[1])}function e(n){var t,r,o,i,a,u=arguments.length,c=u-1,l=n;if(0===u)return!1;if(1===u)return null!==n&&n!==t;if(u>2)for(r=0;c-1>r;r+=1){if(!e(l))return!1;l=l[arguments[r+1]]}return o=arguments[c],null===l?null===o||"null"===o:l===t?o===t||"undefined"===o:""===o?l===o:(i=typeof o,"string"===i?(a=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),a===o):"function"===i?l instanceof o:l===o)}return{is:e,typeOf:n}}),define("scalejs/base.object",["./base.type"],function(n){function e(n){var e,t,r,o=n;if(!c(o))return!1;for(e=1,t=arguments.length;t>e;e+=1)if(r=arguments[e],o=o[r],!c(o))return!1;return!0}function t(n,r){var o;for(o in r)r.hasOwnProperty(o)&&(n[o]=e(r,o)&&r[o].constructor===Object&&e(n,o)?t(n[o],r[o]):r[o]);return n}function r(){var n,e=arguments,r=e.length,o={};for(n=0;r>n;n+=1)t(o,e[n]);return o}function o(n){return r(n)}function i(n,r,o){var i,a=e(o)?o.split("."):[],u=n;for(i=0;i<a.length;i+=1)e(u,a[i])||(u[a[i]]={}),u=u[a[i]];return t(u,r),u}function a(n,t,r){var o,i,a=t.split("."),u=!0;for(o=0;o<a.length;o+=1){if(i=a[o],!e(n,i)){u=!1;break}n=n[i]}return u?n:r}function u(n,t){return e(n)?n:t}var c=n.is;return{has:e,valueOrDefault:u,merge:r,extend:i,clone:o,get:a}}),define("scalejs/base.array",["./base.object"],function(n){function e(n,e){n.indexOf(e)<0&&n.push(e)}function t(n,e){var t=n.indexOf(e);t>-1&&n.splice(t,1)}function r(n){n.splice(0,n.length)}function o(n,e,t){return e=u(e,0),t=u(t,n.length),Array.prototype.slice.call(n,e,t)}function i(n,e,t){var r,o;for(r=0,o=n.length;o>r;r+=1)if(n.hasOwnProperty(r)&&e.call(t,n[r],r,n))return n[r];return null}function a(n,e,t){var r,i,a=[];for(r=n.length;r--;a[r]=n[r]);return i=o(a,e,t)}var u=n.valueOrDefault;return{addOne:e,removeOne:t,removeAll:r,copy:o,find:i,toArray:a}}),define("scalejs/base.log",[],function(){function n(n){return function(){arguments[0]=n+arguments[0],t.apply(this,arguments)}}function e(n){var e=n.stack?String(n.stack):"",t=n.message||"";return"Error: "+t+"\nStack: "+e}var t=Function.prototype.call.bind(console.log,console),r=navigator.userAgent.indexOf("MSIE")>0||navigator.userAgent.indexOf("Trident")>0;return console.log(r),{log:n("       "),info:n("info:  "),error:n("error: "),warn:n("warn:  "),debug:n("debug: "),formatException:e}}),define("scalejs/base",["./base.array","./base.log","./base.object","./base.type"],function(n,e,t,r){return{type:r,object:t,array:n,log:e}}),define("scalejs/core",["./base"],function(n){function e(n){try{if(u(n,"function")){var e=n(f);return e&&(c(f,e),l(p,e)),void 0}if(u(n,"buildCore","function"))return n.buildCore(f),l(p,n),void 0;if(a(n,"core"))return c(f,n.core),l(p,n),void 0;c(f,n),l(p,n)}catch(t){s("Fatal error during application initialization. ",'Failed to build core with extension "',n,"See following exception for more details.",t)}}function t(n){if(!a(n))throw new Error("Sandbox name is required to build a sandbox.");var e={type:f.type,object:f.object,array:f.array,log:f.log};return p.forEach(function(n){try{if(u(n,"buildSandbox","function"))return n.buildSandbox(e),void 0;if(a(n,"sandbox"))return c(e,n.sandbox),void 0;c(e,n)}catch(t){throw s("Fatal error during application initialization. ",'Failed to build sandbox with extension "',n,"See following exception for more details.",t),t}}),e}function r(n){d.push(n)}function o(){g||(g=!0,d.forEach(function(n){n("started")}))}function i(){g&&(g=!1,d.forEach(function(n){n("stopped")}))}var a=n.object.has,u=n.type.is,c=n.object.extend,l=n.array.addOne,s=n.log.error,f={},p=[],d=[],g=!1;return c(f,{type:n.type,object:n.object,array:n.array,log:n.log,buildSandbox:t,notifyApplicationStarted:o,notifyApplicationStopped:i,onApplicationEvent:r,isApplicationRunning:function(){return g},registerExtension:e})}),define("scalejs/application",["scalejs!core"],function(n){function e(){if(n.isApplicationRunning())throw new Error("Can't register module since the application is already running.","Dynamic module loading is not supported.");Array.prototype.push.apply(f,c(arguments).filter(function(n){return n}))}function t(n){var e,t;if("function"==typeof n)try{e=n()}catch(r){t=n.getId?n.getId():n.name,l('Failed to create an instance of module "'+t+'".',"Application will continue running without the module. See following exception stack for more details.",r.stack)}else e=n;return u(p,e),e}function r(){f.forEach(t)}function o(){s("Application started."),n.notifyApplicationStarted()}function i(){r(),o()}function a(){s("Application exited."),n.notifyApplicationStopped()}var u=n.array.addOne,c=n.array.toArray,l=n.log.error,s=n.log.debug,f=[],p=[];return{registerModules:e,run:i,exit:a}});