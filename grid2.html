<!DOCTYPE html>
<html>
<head>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="stylesheet" href="style/metro-bootstrap.min.css" />
	  <link rel="stylesheet" href="style/metro-bootstrap-responsive.min.css" />
    <script src="style/jquery.min.js"></script>
	  <script src="style/jquery.ui.widget.js"></script>	
    <script src="style/metro.min.js"></script>
	  <link rel="stylesheet" href="highlight.css" />

	<meta name="generator" content="DocPad v6.60.4" />
	
    
	<style>
    header {
      height: 45px;
    }
    #content {
      overflow-y: scroll;
	  padding-right: 20px;
	  margin-left: 20px;
    }
    #sidebar {
      display: block;
      float: left;
      width: 300px;
      overflow-y: scroll;
      margin-right:20px;
    }
    body {
      overflow-y: hidden;
     }
	.metro h1 {
		color: #9a1616 !important;
	}	
	.metro .sidebar>ul ul, .metro .sidebar>ul ul li a {
		background-color: #3d3d3d;
		border: 0px;
		color: #fff;
	}
  </style>
    
	<script>
	function adjustHeight() {
		//adjust the height of the content and sidebar
		$("#content").outerHeight(window.innerHeight -45);
		$("#sidebar").outerHeight(window.innerHeight -45);
	}

    $(document).ready(function() {
		var path = window.location.pathname.replace("/scalejs/scalejs-docs/out","");
		
		//make selected page active on sidebar
		$("a[href='." + path +"']").parent().addClass("active");

		adjustHeight();
		$(window).resize(adjustHeight);

		//create code highlighting
		$('pre').each(function() {
			$(this).html($(this).html().replace(/!!\*/g, "<i style='background-color:#FFFF99'>").replace(/\*\*!/g, "</i>"));
		});

		console.log(path);
		//expand grid if it is grid
		if(path === '/grid1.html' || path === '/grid2.html' || path=='/grid3.html') $('#grid-dropdown').css("display","block");
    });

  </script>
</head>
<body class="metro">

  <header>
	  <nav class="navigation-bar dark fixed-top">
    <div class="navigation-bar-content">
        <a href="./" class="element"><span class="icon-home"></span> SCALEJS</a>
        <span class="element-divider"></span>

        <a class="element1 pull-menu" href="#"></a>

        <ul class="element-menu no-desktop">
            <li>
                <a class="dropdown-toggle" href="#"><span class="icon-layers"></span> Docs</a>
                <ul class="dropdown-menu dark" data-role="dropdown">
                    <li>
                        <a href="#" class="dropdown-toggle">Getting Started</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./docs.html"><i class="icon-star-3"></i> Introduction</a></li>
                            <li><a href="./install.html"><i class="icon-download-2"></i> Install Scalejs</a></li>
                            <li><a href="./project.html"><i class="icon-new"></i> Create an Application Project</a></li>
                            <!--<li><a href="./build.html"><i class="icon-cloud"></i> Build and Deployment</a></li>
                            <li><a href="./test.html"><i class="icon-checkmark"></i> Testing</a></li>
                            <li><a href="./best.html"><i class="icon-thumbs-up"></i> Best Practices</a></li>-->
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">Overview</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./template.html"><i class="icon-clipboard-2"></i> Project Template</a></li>
                            <li><a href="./architecture.html"><i class="icon-puzzle"></i> Architecture</a></li>
                            <li><a href="./mvvm.html"><i class="icon-tree-view"></i> Model-View-ViewModel</a></li>
                            <li><a href="./statechart.html"><i class="icon-tab"></i> Statechart</a></li>
                            <li><a href="./routing.html"><i class="icon-share"></i> Routing</a></li>
                            <li><a href="./composition.html"><i class="icon-screen"></i> UI Composition</a></li>
                            <li><a href="./gridlayout.html"><i class="icon-grid-view"></i> Grid Layout</a></li>
                            <!-- <li><a href="./styles.html"><i class="icon-droplet"></i> Styles</a></li>
                            <li><a href="./extensions.html"><i class="icon-wrench"></i> Extensions</a></li>
                            <li><a href="./api.html"><i class="icon-book"></i> API Documentation</a></li>-->
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">UI Components</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li>
                                <a class="dropdown-toggle" href=""><i class="icon-grid"></i> Grid</a>
                                <ul class="dropdown-menu" data-role="dropdown">
                                    <li><a href="./grid1.html">Introduction</a></li>
                                    <li><a href="./grid2.html">Filtering</a></li>
                                    <li><a href="./grid3.html">Sorting</a></li>
                                </ul>
                            </li>
                            <li><a href="./autocomplete.html"><i class="icon-search"></i> Autocomplete</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">Tutorials</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./todomvc.html">ToDoMVC</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="divider"></li>
            <li><a title="Visual Studio Gallery" href="http://visualstudiogallery.msdn.microsoft.com/2a3d0050-ccab-458f-8bfc-2f2aca73e631"><span class="icon-box-add"></span> Visual Studio</a></li>
            <li class="divider"></li>
            <li><a title="GitHub" href="https://github.com/lisovin/scalejs/tree/master"><span class="icon-github-3"></span> GitHub</a></li>
        </ul>

        <div class="no-tablet-portrait no-phone">
            <a href="./docs.html" class="element"><span class="icon-layers"></span> Docs</a>
            <span class="element-divider"></span>

            <a title="Visual Studio Gallery" href="http://visualstudiogallery.msdn.microsoft.com/2a3d0050-ccab-458f-8bfc-2f2aca73e631" class="element place-right"><span class="icon-box-add"></span> Visual Studio</a>
            <span class="element-divider place-right"></span>

            <a title="GitHub" href="https://github.com/lisovin/scalejs/tree/master" class="element place-right"><span class="icon-github-3"></span> GitHub</a>
            <span class="element-divider place-right"></span>
        </div>
    </div>
</nav>
  </header>
  
  <div id="container">
     
       <div id="sidebar" class="sidebar no-tablet-portrait no-phone">
		      <ul>
			      <li class="title">Getting Started</li>
				      <li><a href="./docs.html"><i class="icon-star-3"></i> Introduction</a></li>
				      <li><a href="./install.html"><i class="icon-download-2"></i> Install Scalejs</a></li>
				      <li><a href="./project.html"><i class="icon-new"></i> Create an Application Project</a></li>
                            <!--<li><a href="./build.html"><i class="icon-cloud"></i> Build and Deployment</a></li>
                            <li><a href="./test.html"><i class="icon-checkmark"></i> Testing</a></li>
                            <li><a href="./best.html"><i class="icon-thumbs-up"></i> Best Practices</a></li>-->
			      <li class="title">Overview</li>
                            <li><a href="./template.html"><i class="icon-clipboard-2"></i> Project Template</a></li>
                            <li><a href="./architecture.html"><i class="icon-puzzle"></i> Architecture</a></li>
                            <li><a href="./mvvm.html"><i class="icon-tree-view"></i> Model-View-ViewModel</a></li>
                            <li><a href="./statechart.html"><i class="icon-tab"></i> Statechart</a></li>
                            <li><a href="./routing.html"><i class="icon-share"></i> Routing</a></li>
                            <li><a href="./composition.html"><i class="icon-screen"></i> UI Composition</a></li>
                            <li><a href="./gridlayout.html"><i class="icon-grid-view"></i> Grid Layout</a></li>
                            <!--<li><a href="./styles.html"><i class="icon-droplet"></i> Styles</a></li>
                            <li><a href="./extensions.html"><i class="icon-wrench"></i> Extensions</a></li>
                            <li><a href="./api.html"><i class="icon-book"></i> API Documentation</a></li>-->
				  <li class="title">UI Components</li>
				            <li>
								<a class="dropdown-toggle" href=""><i class="icon-grid"></i> Grid</a>
								<ul id="grid-dropdown" class="dropdown-menu" data-role="dropdown">
									<li><a href="./grid1.html">Introduction</a></li>
									<li><a href="./grid2.html">Filtering</a></li>
									<li><a href="./grid3.html">Sorting</a></li>
								</ul>
							</li>
							<li><a href="./autocomplete.html"><i class="icon-search"></i> Autocomplete</a></li>
				 <li class="title">Tutorials</li>
				      <li><a href="./todomvc.html">ToDoMVC</a></li>
		      </ul>
	      </div>

	    <div id="content">
		    <p><link href="grid/slick/slick.grid.css" rel="stylesheet" type="text/css" /></p>
<p><link href="grid/slick/slick-default-theme.css" rel="stylesjeet" type="text/css" /></p>
<p><script src="grid/Grid-1.0.2.min.js" type="text/javascript"></script></p>
<h1 id="grid-filtering">Grid Filtering</h1>
<hr>

<p><a href="http://scalejs.com/scalejs-examples/Grid/">Grid Live Sample</a> |
<a href="https://github.com/lisovin/scalejs-examples/tree/master/Grid">Grid on GitHub</a></p>
<hr>


<p>In this section we will show you how to add filtering capabilities to your <a href="https://github.com/lisovin/scalejs-examples/tree/grid-1/Grid">grid</a>. 
In order to do this, you should already have a grid in your application. 
You can learn how to add a grid to your application in the <a href="./grid1.html">grid introduction</a> tutorial.</p>
<p>Filtering can be done in two ways. You can either use the <a href="./grid2.html#default-filtering">default filtering</a> which comes with the extension,
or you can use <a href="./grid2.html#viewmodel-filtering">viewmodel filtering</a>. The benefit to the latter is that you have full
control over the data in the grid - meaning you have the option to implement filtering on the server. </p>
<p><br></p>
<h2 id="filter-overview">Filter Overview</h2>
<p>The filtering control gives you many different ways of filtering the data.</p>
<p><img src="./filter2.png" alt="filter1"></p>
<p>In this picture, we have highlighted 4 aspects of the filter. The filter itself can be opened by
clicking on the filter icon (pictured within the quick filter box).</p>
<ol>
<li><strong>Quick Filter:</strong> an input box on the header that can be used to quickly filter data</li>
<li><strong>Quick Search:</strong> an input box within the filter which allows you to narrow the options displayed within the list</li>
<li><strong>List:</strong> a list of values which can be checked or unchecked.
The grid will only show rows which contain the selected items in the list. 
If all of the items are selected and there is a quick search enter, the filter behaves as if a
quick filter is entered.</li>
<li><strong>Value:</strong> this will filter based upon conditions and values. For strings, the conditions are
<em>contains</em>, <em>starts with</em>, and <em>ends with</em>. For numbers, the conditions are <em>equal to</em>, <em>greater than</em>, <em>less than</em>, and <em>not equal to</em>.
There is also an option to remove any data which contains an empty value for that column by checking <em>are not empty</em>.</li>
</ol>
<p>When setting a value, selecting items in the list, or typing in a quick filter,
 it resets other filters for that column. For example, if you have an item checked, and then decided to enter a value,
your list selection would be removed.</p>
<p><br></p>
<h3 id="bindings">Bindings</h3>
<p>The first change you need to make, regardless of if you use default filtering or viewmodel filtering, is in the bindings.
Filtering uses a header row to allow you to type in a click filter or click the icon to open up the filter box.</p>
<h5 id="example-updating-the-bindings-mainbindings-js-https-github-com-lisovin-scalejs-examples-blob-grid-2a-grid-app-main-bindings-mainbindings-js-">Example: Updating the bindings(<a href="https://github.com/lisovin/scalejs-examples/blob/grid-2a/Grid/app/main/bindings/mainBindings.js">mainBindings.js</a>]</h5>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">/*global define */</span>
<span class="hljs-comment">/*jslint sloppy: true*/</span>
define({
    <span class="hljs-string">'main-grid'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">return</span> {
            slickGrid: {
                columns: <span class="hljs-keyword">this</span>.columns,
                itemsSource: <span class="hljs-keyword">this</span>.itemsSource,
                enableColumnReorder: <span class="hljs-literal">false</span>,
                forceFitColumns: <span class="hljs-literal">true</span>,
                rowHeight: <span class="hljs-number">40</span>!!*,
                showHeaderRow: <span class="hljs-literal">true</span>**!
            }
        };
    }
});
</code></pre>
<p><br></p>
<h2 id="default-filtering">Default Filtering</h2>
<p>If you do not wish to implement your own filtering, you may use the filtering provided by the extension.
This requires minimal work on your part. You can view this code on <a href="https://github.com/lisovin/scalejs-examples/tree/grid-2a/Grid">github</a>
or clone <a href="https://github.com/lisovin/scalejs-examples">scalejs-examples repository</a> and running the following command:</p>
<p><code>git checkout grid-2a</code></p>
<h3 id="columns">Columns</h3>
<p>The only changes you need to make to enable filtering on the column(s) is by putting a property on the column object.
You simply need to specify that there is a filter for that column, and pass it an object with some configuration information.
There are two types of filters - <code>string</code> and <code>number</code> - you will need to specify which one for each column.
You may also specify a <code>quickFilterOp</code> property to change the default filtering of the quick filter.
By default, it uses <code>StartsWith</code>, but you can specify <code>Contains</code>.</p>
<h5 id="example-the-viewmodel-with-the-modified-columns-mainviewmodel-js-https-github-com-lisovin-scalejs-examples-blob-grid-2a-grid-app-main-viewmodels-mainviewmodel-js-">Example: the viewmodel with the modified columns (<a href="https://github.com/lisovin/scalejs-examples/blob/grid-2a/Grid/app/main/viewmodels/mainViewModel.js">mainViewModel.js</a>)</h5>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">/*global define */</span>
define([
    <span class="hljs-string">'sandbox!main'</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(
    sandbox
)</span> {</span>
<span class="hljs-pi">    'use strict'</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> <span class="hljs-comment">// imports</span>
            observableArray = sandbox.mvvm.observableArray,
            ajaxGet = sandbox.ajax.jsonpGet,
            <span class="hljs-comment">// vars</span>
            columns,
            itemsSource = observableArray();

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">moneyFormatter</span><span class="hljs-params">(m)</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(m).toFixed(<span class="hljs-number">2</span>);
        }

        columns = [
            { id: <span class="hljs-string">"Symbol"</span>, field: <span class="hljs-string">"Symbol"</span>, name: <span class="hljs-string">"Symbol"</span>, minWidth: <span class="hljs-number">75</span>!!*, filter: { type: <span class="hljs-string">'string'</span> }**! },
            { id: <span class="hljs-string">"Name"</span>, field: <span class="hljs-string">"Name"</span>, name: <span class="hljs-string">"Name"</span>, minWidth: <span class="hljs-number">300</span>!!*, filter: { type: <span class="hljs-string">'string'</span>, quickFilterOp: <span class="hljs-string">'Contains'</span> }**! },
            { id: <span class="hljs-string">"LastSale"</span>, field: <span class="hljs-string">"LastSale"</span>, name: <span class="hljs-string">"Last Sale"</span>, cssClass: <span class="hljs-string">"money"</span>, minWidth: <span class="hljs-number">100</span>!!*, filter: { type: <span class="hljs-string">'number'</span> }**! },
            { id: <span class="hljs-string">"MarketCap"</span>, field: <span class="hljs-string">"MarketCap"</span>, name: <span class="hljs-string">"Market Cap"</span>, cssClass: <span class="hljs-string">"money"</span>, minWidth: <span class="hljs-number">150</span>!!*, filter: { type: <span class="hljs-string">'mumber'</span> }**! },
            { id: <span class="hljs-string">"Sector"</span>, field: <span class="hljs-string">"Sector"</span>, name: <span class="hljs-string">"Sector"</span>, minWidth: <span class="hljs-number">150</span>!!*, filter: { type: <span class="hljs-string">'string'</span> }**! },
            { id: <span class="hljs-string">"Industry"</span>, field: <span class="hljs-string">"industry"</span>, name: <span class="hljs-string">"Industry"</span>, minWidth: <span class="hljs-number">350</span>!!*, filter: { type: <span class="hljs-string">'string'</span>, quickFilterOp: <span class="hljs-string">'Contains'</span> }**! }];

        ajaxGet(<span class="hljs-string">'./companylist.txt'</span>, {}).subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data)</span> {</span>
            itemsSource(<span class="hljs-built_in">JSON</span>.parse(data).map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(company)</span> {</span>
                <span class="hljs-comment">// money formatter</span>
                company.LastSale = moneyFormatter(company.LastSale);
                company.MarketCap = moneyFormatter(company.MarketCap);
                <span class="hljs-keyword">return</span> company;
            }));
        });

        <span class="hljs-keyword">return</span> {
            columns: columns,
            itemsSource: itemsSource
        };
    };
});
</code></pre>
<p>Whether you are using the default filtering, or using your ViewModel to filter, your <a href="./grid2.html#images-and-styles">images and styles</a>
and the <a href="./grid2.html#result">result</a> will be the same.</p>
<p><br></p>
<h2 id="viewmodel-filtering">ViewModel Filtering</h2>
<p>If instead of using the default filtering you would like to implement your own, you can do that too.
This is advantageous if you would rather do filtering on the server. 
For simplicity, our example will do the filtering within the ViewModel, but it would not be much different if you were to do it on the server.</p>
<p>You can view this code on <a href="https://github.com/lisovin/scalejs-examples/tree/grid-2b/Grid">github</a>
or clone <a href="https://github.com/lisovin/scalejs-examples">scalejs-examples repository</a> and running the following command:</p>
<p><code>git checkout grid-2b</code>
<br></p>
<h3 id="columns">Columns</h3>
<p>Filtering must also be enabled on the columns themselves. This is more complex than the default filtering because
you must specify observables for the filter to use. 
ViewModel filters also need a <code>type</code> propery which can be <code>string</code> or <code>number</code>, and optionally, it can be passed a <code>quickFilterOp</code>.</p>
<h5 id="example-the-observables-that-need-to-be-defined-on-the-filter-for-the-column">Example: the observables that need to be defined on the filter for the column</h5>
<pre class="highlight"><code class="hljs javascript">{ 
    id: <span class="hljs-string">"Symbol"</span>, 
    field: <span class="hljs-string">"Symbol"</span>, 
    name: <span class="hljs-string">"Symbol"</span>, 
    minWidth: <span class="hljs-number">75</span>, 
    filter: {
        type: <span class="hljs-string">'string'</span>,
        !!*value: observable(), <span class="hljs-comment">// contains the value of the filter</span>
        quickSearch: observable(), <span class="hljs-comment">// contains the value of the quickSearch</span>
        values: observableArray() <span class="hljs-comment">// displays the result of the quickSearch**!</span>
    }
};
</code></pre>
<p>For the sake of simplicity, we will only have a filter on the <strong>Symbol</strong> column. 
Since we do not have a backend service to do the filtering for us, we will do the filtering in a seperate file, <strong>filtering.js</strong>.</p>
<p><strong>Note: do not mix in default filtering with ViewModel filtering.</strong></p>
<p>The value in the <code>value</code> and the <code>quickSearch</code> observable will <strong>always be an array</strong> which is either empty
or contains 1 of more of objects with the following format</p>
<h5 id="example-what-to-expect-from-values-and-quicksearch">Example: what to expect from values and quickSearch</h5>
<pre class="highlight"><code class="hljs javascript">{
    op: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">string</span> <span class="hljs-attribute">with</span> `<span class="hljs-attribute">StartsWith</span>`, `<span class="hljs-attribute">Contains</span>`, `<span class="hljs-attribute">EndsWith</span>`, <span class="hljs-attribute">etc</span>&gt;</span>
    values: [<span class="hljs-tag">&lt;<span class="hljs-title">an</span> <span class="hljs-attribute">array</span> <span class="hljs-attribute">with</span> <span class="hljs-attribute">the</span> <span class="hljs-attribute">values</span> <span class="hljs-attribute">of</span> <span class="hljs-attribute">the</span> <span class="hljs-attribute">operation</span>&gt;</span>]
}
</span></code></pre>
<p>When implementing filtering, make sure to be careful about types and case.</p>
<h5 id="example-the-viewmodel-for-itemssource-and-columns-mainviewmodel-js-https-github-com-lisovin-scalejs-examples-blob-grid-2b-grid-app-main-viewmodels-mainviewmodel-js-">Example: the viewmodel for itemsSource and columns (<a href="https://github.com/lisovin/scalejs-examples/blob/grid-2b/Grid/app/main/viewmodels/mainViewModel.js">mainViewModel.js</a>)</h5>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">/*global define */</span>
define([
    <span class="hljs-string">'sandbox!main'</span>,!!*
    <span class="hljs-string">'./filtering'</span>**!
], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(
    sandbox!!*,
    setupFilter**!
)</span> {</span>
<span class="hljs-pi">    'use strict'</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> <span class="hljs-comment">// imports</span>
            observableArray = sandbox.mvvm.observableArray,
            ajaxGet = sandbox.ajax.jsonpGet,!!*
            observable = sandbox.mvvm.observable,**!
            <span class="hljs-comment">// vars</span>
            columns,
            itemsSource = observableArray();

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">moneyFormatter</span><span class="hljs-params">(m)</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(m).toFixed(<span class="hljs-number">2</span>);
        }

        columns = [
            {
                id: <span class="hljs-string">"Symbol"</span>, field: <span class="hljs-string">"Symbol"</span>, name: <span class="hljs-string">"Symbol"</span>, minWidth: <span class="hljs-number">75</span>,
                !!*filter: {
                    type: <span class="hljs-string">'string'</span>,
                    value: observable(), <span class="hljs-comment">// contains the value of the filter</span>
                    quickSearch: observable(), <span class="hljs-comment">// contains the value of the quickSearch</span>
                    values: observableArray() <span class="hljs-comment">// displays the result of the quickSearch</span>
                }**!
            },
            { id: <span class="hljs-string">"Name"</span>, field: <span class="hljs-string">"Name"</span>, name: <span class="hljs-string">"Name"</span>, minWidth: <span class="hljs-number">300</span> },
            { id: <span class="hljs-string">"LastSale"</span>, field: <span class="hljs-string">"LastSale"</span>, name: <span class="hljs-string">"Last Sale"</span>, cssClass: <span class="hljs-string">"money"</span>, minWidth: <span class="hljs-number">100</span> },
            { id: <span class="hljs-string">"MarketCap"</span>, field: <span class="hljs-string">"MarketCap"</span>, name: <span class="hljs-string">"Market Cap"</span>, cssClass: <span class="hljs-string">"money"</span>, minWidth: <span class="hljs-number">150</span> },
            { id: <span class="hljs-string">"Sector"</span>, field: <span class="hljs-string">"Sector"</span>, name: <span class="hljs-string">"Sector"</span>, minWidth: <span class="hljs-number">150</span> },
            { id: <span class="hljs-string">"Industry"</span>, field: <span class="hljs-string">"industry"</span>, name: <span class="hljs-string">"Industry"</span>, minWidth: <span class="hljs-number">350</span> }];

        ajaxGet(<span class="hljs-string">'./companylist.txt'</span>, {}).subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data)</span> {</span>
            !!*<span class="hljs-comment">// maintain original companies for filtering</span>
            <span class="hljs-keyword">var</span> companies = <span class="hljs-built_in">JSON</span>.parse(data).map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(company)</span> {</span>**!
                <span class="hljs-comment">// money formatter</span>
                company.LastSale = moneyFormatter(company.LastSale);
                company.MarketCap = moneyFormatter(company.MarketCap);
                <span class="hljs-keyword">return</span> company;
            });

            itemsSource(companies);

            !!*<span class="hljs-comment">// enable filtering using filtering.js</span>
            setupFilter(columns[<span class="hljs-number">0</span>], companies, itemsSource);**!
        });

        <span class="hljs-keyword">return</span> {
            columns: columns,
            itemsSource: itemsSource
        };
    };
});
</code></pre>
<p><br></p>
<h3 id="filtering-js">filtering.js</h3>
<p>For clarity, we decided to implement the filtering in a seperate file, filtering.js.</p>
<h5 id="example-filtering-items-in-filtering-js-https-github-com-lisovin-scalejs-examples-blob-grid-2b-grid-app-main-viewmodels-filtering-js-">Example: filtering items in <a href="https://github.com/lisovin/scalejs-examples/blob/grid-2b/Grid/app/main/viewmodels/filtering.js">filtering.js</a></h5>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">/*global define */</span>
define([
    <span class="hljs-string">'sandbox!main'</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(
    sandbox
)</span> {</span>
<span class="hljs-pi">    'use strict'</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(column, originalItems, itemsSource)</span> {</span>
        <span class="hljs-keyword">var</span> colFilter = column.filter,
            <span class="hljs-comment">// comparison functions needed for string filter</span>
            <span class="hljs-comment">// s is the 'source' items and v are the 'values' in the expression</span>
            comparisons = {
                In: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(s, v)</span> {</span> <span class="hljs-keyword">return</span> v.some(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span> <span class="hljs-keyword">return</span> s.match(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + x + <span class="hljs-string">'</span>, <span class="hljs-string">'i'</span>)); }); },
                Contains: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(s, v)</span> {</span> <span class="hljs-keyword">return</span> s.match(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(v[<span class="hljs-number">0</span>], <span class="hljs-string">'i'</span>)); },
                StartsWith: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(s, v)</span> {</span> <span class="hljs-keyword">return</span> s.match(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + v[<span class="hljs-number">0</span>], <span class="hljs-string">'i'</span>)); },
                EndsWith: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(s, v)</span> {</span> <span class="hljs-keyword">return</span> s.match(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(v[<span class="hljs-number">0</span>] + <span class="hljs-string">'</span>, <span class="hljs-string">'i'</span>)); },
                NotEmpty: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(s)</span> {</span> <span class="hljs-keyword">return</span> s !== <span class="hljs-string">""</span> }
            };

        <span class="hljs-comment">// filterExpression contains the operation (e.g. 'StartsWith') and values</span>
        <span class="hljs-comment">// returns a function which can be used to filter items</span>
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">evaluate</span><span class="hljs-params">(filterExpression)</span> {</span>
            <span class="hljs-keyword">var</span> evaluateOperation = comparisons[filterExpression.op];

            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> {</span>
                <span class="hljs-keyword">return</span> evaluateOperation(item[column.field], filterExpression.values);
            }
        }

        <span class="hljs-comment">// value is the filter expression(s) defined by user</span>
        <span class="hljs-comment">// subscribe to value to respond to user input</span>
        colFilter.value.subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(expressions)</span> {</span>
            <span class="hljs-keyword">var</span> filteredItems;

            <span class="hljs-comment">// iterate through all expressions, filtering the items each item</span>
            filteredItems = expressions.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(items, filterExpression)</span> {</span>
                <span class="hljs-keyword">return</span> items.filter(evaluate(filterExpression));
            }, originalItems);

            <span class="hljs-comment">// finally, update the itemsSource with the new items</span>
            itemsSource(filteredItems);
        });

        <span class="hljs-comment">// need to also set the list items by subscribing to quickSearch</span>
        colFilter.quickSearch.subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(quickSearchExpression)</span> {</span>
            <span class="hljs-keyword">var</span> listItems = originalItems
                .filter(evaluate(quickSearchExpression))
                .map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(c)</span> {</span> <span class="hljs-keyword">return</span> c[column.field] }); <span class="hljs-comment">// only need the values in the column</span>

            <span class="hljs-comment">// update the list values (filter.values observableArray) with the new list items</span>
            <span class="hljs-comment">// take 50 for optimization</span>
            colFilter.values(listItems.take(<span class="hljs-number">50</span>).toArray());
        });
    };
});
</code></pre>
<p>Whether you are using the default filtering, or using your ViewModel to filter, your <a href="./grid2.html#images-and-styles">images-and-styles</a>
and the <a href="./grid2.html#result">result</a> will be the same. </p>
<p><br></p>
<h2 id="images-and-styles">Images and Styles</h2>
<p>Include the images for the arrow and on/off state of the filter which can be found <a href="https://github.com/lisovin/scalejs-examples/tree/grid-2a/Grid/images">here</a>.
Update your <a href="https://github.com/lisovin/scalejs-examples/blob/grid-2a/Grid/app/main/styles/main.less">main.less</a> file so that it contains styles for grids.</p>
<p><br></p>
<h2 id="result">Result</h2>
<p>Here is the result of adding filtering.</p>
<div id="grid1" style="width:100%;height:600px"></div>
	    </div>

  </div>
</div>
    
</body>
</html>