<h1 id="explanation-and-overview">Explanation and Overview</h1>
<p><link rel="stylesheet" type="text/css" href="global.css">
  <link rel="stylesheet" href="highlight.css"></p>
<p>To create a scalejs application requires an understanding of the how things are done. 
If you are seeking a deeper understanding of the various components of a scalejs application, you&#39;re in the right place. 
If you are still unfamilular with scalejs and what it can do, check out the <a href="./power.html">Intro to Scalejs</a></p>
<p>This section will cover in detail</p>
<ul>
<li>The <strong>Project Template</strong> and all of the files within it</li>
<li><strong>Modules</strong> and how they can be created</li>
<li>What the <strong>Sandbox</strong> is used for</li>
<li>The purpose of the <strong>Statechart</strong></li>
<li>What <strong>Views</strong> are is and how to make one</li>
<li>What <strong>ViewModels</strong> do and how to develop them</li>
<li>How to create <strong>Bindings</strong></li>
<li>The proper way to approach <strong>Styles</strong></li>
<li>How we can create a <strong>Layout</strong></li>
<li>What <strong>Extensions</strong> are and how to install them or create one</li>
</ul>
<h2 id="project-template">Project Template</h2>
<p>The first thing you will be exposed to after <a href="./project.html">creating a project</a> is the file structure of the project.</p>
<p><img src="./project2.png" alt="Files generated by project template"></p>
<p>In this structure there is a bunch of boilerplate code, but it is actually a runable project. 
Projects can be run by pressing <strong>ctrl + f5</strong>. </p>
<p>The project template consists of:</p>
<ul>
<li><strong>index.html</strong>, the bootstrapper of the app, and <strong>config.js</strong> a file which specifies the paths to base libraries and scalejs extensions.</li>
<li><strong>app folder</strong>, a collection of modules needed in the app, and <strong>app.js</strong>, the file which registers said modules.</li>
<li><strong>main folder</strong>, a collection of files needed in the main module, and <strong>mainModule.js</strong>, a file which defines states and ties together the functional and visual aspects of the module.</li>
<li><strong>views folder</strong>, a collection of views needed for the main module, and <strong>main.html</strong>, a file containing a view used by the main module.</li>
<li><strong>bindings folder</strong>, a collection of bindings needed for the main module, and <strong>mainBindings.js</strong>, the file which contains bindings used by the main module.</li>
<li><strong>viewmodels folder</strong>, a collection of viewmodels needed in the main module, and <strong>mainViewModel.js</strong>, the file which contains a viewmodel used by the main module.</li>
<li><strong>styles folder</strong>, a collection of styles needed in the main module, and <strong>main.css</strong> or <strong>main.less</strong>, the file which contains the styles used by the main module.</li>
<li><strong>Scripts folder</strong>, a collection of base libraries and extensions</li>
<li><strong>test folder</strong>, a folder containing unit tests for the application</li>
</ul>
<p>This section will introduce you to the code and purpose of these files. How you can expand to these files to do more complex things will be covered in another section.</p>
<h3 id="index-html-and-config-js">index.html and config.js</h3>
<p>index.html is the starting point for your app. </p>
<p><strong>index.html</strong></p>
<pre><code class="lang-xml"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
    <span class="tag">&lt;<span class="title">head</span>&gt;</span>
        <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"config.js"</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
        <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"Scripts/require.js"</span> <span class="attribute">data-main</span>=<span class="value">"app/app"</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
        <span class="tag">&lt;<span class="title">title</span>&gt;</span>helloworld application (development version).<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">body</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span></code></pre>
<p>Only two scripts are referenced in this file: config.js and require.js. 
The use of <a href="http://requirejs.org/">requirejs</a> allows us to write code in seperate files,
while also maintaining dependencies and ensuring files get loaded in order.
It also allows us to write code without adding variables to the global namespace,
as it provides function scope.</p>
<p><strong>require.js</strong></p>
<p>The most important aspect of this file is that it tells requirejs that our starting point is the <a href="./overview.html#app">app folder</a>
You also will notice we have other index files, e.g. <em>index.debug.html</em>, <em>index.release.html</em>, and <em>index.test.html</em>.
<em>index.release</em> and <em>index.debug</em> serve a similar purpose as <em>index</em> but they load concatenated versions of your
application where as <em>index.html</em> will load files in their respective directories. 
The difference between the two is that <em>index.release</em> will load a minified version of your app. 
These will be used once you <a href="./build.html">build the application</a>. 
<em>index.test</em> is different; it will allow you to run unit tests for your code. 
More information on testing can be found <a href="./test.html">here</a>.</p>
<p><strong>config.js</strong></p>
<p>config.js tells requirejs what base libraries and extensions need to be loaded.
It is automatically editted whenever you install, update, or uninstall an extension via NuGet,
so you will not need to edit this file unless you are have an intermidiate understanding
of scalejs and are ready to <a href="./extension.html">build your own extension</a>. </p>
<h3 id="app-folder-and-app-js">app folder and app.js</h3>
<p>The app folder contains a single file <strong>app.js</strong> as well as folders for the modules in your application.</p>
<p><strong>app.js</strong></p>
<pre><code class="lang-javascript"><span class="comment">/*global require*/</span>
require([
    <span class="string">'scalejs!application/main'</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(
    application
)</span> {</span>
    <span class="string">'use strict'</span>;

    application.run();
});</code></pre>
<p>This is the bootstrapper of your app; it loads the modules and runs the application.
Modules can be registered and loaded by appending a comma folloed by the module&#39;s name to <code>scalejs!application/main</code>. 
For example, if you add a new module and name it <em>new</em>, your would need to change <code>scalejs!application/main</code> to <code>scalejs!application/main,new</code></p>
<p>When adding a new module, you would do so by <strong>right clicking on the app folder</strong>, selecting <strong>Add &gt; New Item</strong>,
and selecting the appropriate template for a Scalejs Module. 
If you are using a project with LESS, select a <strong>Scalejs LESS Module</strong>, and if you are using a project with CSS,
select <strong>Scalejs CSS Module</strong>. </p>
<h3 id="main-folder-and-mainmodule-js">main folder and mainModule.js</h3>
<p>The main folder contains the files needed for the main module.
Typically, the main module is the shell of your application and will be used to define the layout for your app
by creating regions to contain content from other modules. 
It also can define styles specific to your application.</p>
<p>A folder for a module contains of a file which will be run when the module is loaded. 
In the case of main, this file is called <strong>mainModule.js</strong>.
Similarly, additional modules will follow the naming convention <strong><moduleName>Module.js</strong></p>
<p><strong>mainModule.js</strong></p>
<pre><code class="lang-javascript"><span class="comment">/*global define */</span>
define([
    <span class="string">'sandbox!main'</span>,
    <span class="string">'app/main/viewmodels/mainViewModel'</span>,
    <span class="string">'views!main'</span>,
    <span class="string">'bindings!main'</span>,
    <span class="string">'styles!main'</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(
    sandbox,
    mainViewModel
)</span> {</span>
    <span class="string">'use strict'</span>;

    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">()</span> {</span>
        <span class="keyword">var</span> <span class="comment">// imports</span>
            root = sandbox.mvvm.root,
            template = sandbox.mvvm.template,
            registerStates = sandbox.state.registerStates,
            state = sandbox.state.builder.state,
            onEntry = sandbox.state.builder.onEntry,
            <span class="comment">// vars</span>
            viewModel = mainViewModel();

        <span class="comment">// Register application state for the module.</span>
        registerStates(<span class="string">'root'</span>,
            state(<span class="string">'app'</span>,
                state(<span class="string">'main'</span>,
                    onEntry(<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                        <span class="comment">// Render viewModel using 'main_template' template </span>
                        <span class="comment">// (defined in main.html) and show it in the `root` region.</span>
                        root(template(<span class="string">'main_template'</span>, viewModel));
                    }))));
    };
});</code></pre>
<p>This file consists of a <a href="http://requirejs.org/">requirejs</a> module which is used to load the views, viewmodels,
bindings, and styles for the module. Requirejs modules differ from scalejs modules as a requirejs module
is created using <code>define</code> and is used also to define viewmodels and bindings. A scalejs module, on the other hand,
is a combination of html and javscript files needed to implement a specific feature for your app which is independent
of other features of the app. The purpose of the <strong>mainModule.js</strong> file is to setup the module;
it does not solve functional tasks, its primary job is to tie the other components of the modules together by including them
at the top of define as seen above and define the <a href="./overview.html#statechart">statechart</a>.</p>
<p><em>Read more about <a href="./overview.html#modules">Modules</a></em></p>
<h3 id="view-folder-and-main-html">view folder and main.html</h3>
<p>The view folder is a container of <a href="./overview.thml#views">views</a> and includes one view file for the main module:</p>
<p><strong>main.html</strong></p>
<pre><code class="lang-xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"main_template"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"main text"</span> <span class="attribute">data-class</span>=<span class="value">"main-text"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span> from helloworld.
<span class="tag">&lt;/<span class="title">div</span>&gt;</span></code></pre>
<p>It consists of a single template, <code>main_template</code>. This template text which is bound to a <code>data-class</code> named <code>main-text</code>.
The purpose of the view is to contain the templates needed for the module. Usually, it is neccesary to bind components
of templates to data which is signified by <code>data-class</code>. 
<code>data-class</code> connects your view to your bindings, which will be discussed next.</p>
<p><em>Read more about <a href="./overview.html#views">Views</a></em></p>
<h3 id="bindings-folder-and-mainbindings-js">bindings folder and mainBindings.js</h3>
<p>Bindings define the data-classes which are used in the view. Bindings rarely exist on their own;
they are always referenced by a view. Since <strong>main.html</strong> defines a <code>data-class</code> property,
it <em>must</em> be created in the bindings. This data-class is defined in <strong>mainBindings.js</strong></p>
<p><strong>mainBindings.js</strong></p>
<pre><code class="lang-javascript"><span class="comment">/*global define */</span>
<span class="comment">/*jslint sloppy: true*/</span>
define({
    <span class="string">'main-text'</span>: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">return</span> {
            text: <span class="keyword">this</span>.text
        };
    }
});</code></pre>
<p><code>data-class</code> provides similar functionality to what is found in <code>data-bind</code> which is provided by <a href="http://knockoutjs.com/">knockoutjs</a>.
More specifically, <code>data-class</code> is extends the capabilities of knockout by allowing you to define your data-binds in a seperate
file. This avoids ugly inline html for more complex code.</p>
<p>Bindings are what connects your view to your viewmodel. The viewmodel is covered in the next section.</p>
<p><em>Read more about <a href="./overview.html#bindings">Bindings</a></em></p>
<h3 id="viewmodels-folder-and-mainviewmodel-js">viewmodels folder and mainViewModel.js</h3>
<p>Viewmodels are what perform the logical and functional tasks of your module.
Viewmodels also define the model for your view; e.g. whatever needs to be in your view
which is data-centric or requires dynamic modification must be defined and exposed by a viewmodel.
The viewmodel used in the main module is <strong>mainViewModel.js</strong></p>
<p><strong>mainViewModel.js</strong></p>
<pre><code class="lang-javascript"><span class="comment">/*global define */</span>
define([
    <span class="string">'sandbox!main'</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(
    sandbox
)</span> {</span>
    <span class="string">'use strict'</span>;

    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">var</span> <span class="comment">// imports</span>
            observable = sandbox.mvvm.observable,
            <span class="comment">// properties</span>
            text = observable(<span class="string">'Hello World'</span>);

        <span class="keyword">return</span> {
            text: text
        };
    };
});</code></pre>
<p>In this file, we have exposed the <code>text</code> observable which was referenced in the bindings in the previous section.</p>
<p><em>Read more about <a href="./overview.html#viewmodel">ViewModels</a></em></p>
<h3 id="styles-folder-and-main-css-or-main-less">styles folder and main.css or main.less</h3>
<p>Styles are what are used modify the visual aspect of your modules.
There is nothing special about the style which is provided by the template.
However, we do recommend giving thought to the order and structure of styles when building a large application.
These recommendations can be found in the styles section.</p>
<p><em>Read more about <a href="./overview.html#styles">Styles</a></em></p>
<h3 id="scripts">Scripts</h3>
<p>The Scripts folder contains a combination of core scalejs files, scalejs extensions, and base libraries.
The difference between extensions and base libraries are one of the key advantages of scalejs.
If you&#39;re not sure why, make sure to read about it <a href="./power.html#scalable">here</a></p>
<h3 id="test">test</h3>
<p>The test folder contains unit tests which are provided by the <a href="http://pivotal.github.io/jasmine/">jasmine</a>
testing framework. </p>
<p><strong>all.tests.js</strong></p>
<pre><code class="lang-javascript"><span class="comment">/*global define,jasmine*/</span>
define([
    <span class="string">'jasmine-html'</span>,
    <span class="string">'scalejs!application'</span>,
    <span class="string">'./mainViewModel.test'</span>
], <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="string">'use strict'</span>;

    <span class="keyword">var</span> jasmineEnv = jasmine.getEnv(),
        htmlReporter = <span class="keyword">new</span> jasmine.HtmlReporter();

    jasmineEnv.updateInterval = <span class="number">1000</span>;
    jasmineEnv.addReporter(htmlReporter);

    jasmineEnv.specFilter = <span class="function"><span class="keyword">function</span> <span class="params">(spec)</span> {</span>
        <span class="keyword">return</span> htmlReporter.specFilter(spec);
    };

    jasmineEnv.execute();
});</code></pre>
<p>This file starts the tests. Add new tests by referencing them in the first argument of <code>define</code>
like how <code>./mainViewModel.test</code> is defined.</p>
<p><strong>mainViewModel.test.js</strong></p>
<pre><code class="lang-javascript"><span class="comment">/*global define,describe,expect,it*/</span>
<span class="comment">/*jslint sloppy: true*/</span>
<span class="comment">/// &lt;reference path="../Scripts/jasmine.js"/&gt;</span>
define([
    <span class="string">'scalejs!core'</span>,
    <span class="string">'app/main/viewmodels/mainViewModel'</span>,
    <span class="string">'scalejs!application'</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(core, mainViewModel)</span> {</span>
    describe(<span class="string">'`mainViewModel`'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">var</span> vm = mainViewModel(core.buildSandbox(<span class="string">'main.test'</span>));

        it(<span class="string">'text is set to "Hello World" after initialization.'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
            expect(vm).toBeDefined();
            expect(vm.text()).toBe(<span class="string">'Hello World'</span>);
        });
    });
});</code></pre>
<p>This test checks if the mainViewModel was loaded and text observable from the mainViewModel is &#39;Hello World!&#39;</p>
<p><em>Read more about <a href="./best#testing">testing</a></em></p>
<h2 id="module">Module</h2>
<h2 id="view">View</h2>
<h2 id="viewmodel">ViewModel</h2>
<h2 id="styles">Styles</h2>
<h2 id="layout">Layout</h2>
<h2 id="sandbox">Sandbox</h2>
<h2 id="statechart">Statechart</h2>
<h2 id="extensions">Extensions</h2>
