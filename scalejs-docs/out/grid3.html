<!DOCTYPE html>
<html>
<head>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="stylesheet" href="style/metro-bootstrap.min.css" />
	  <link rel="stylesheet" href="style/metro-bootstrap-responsive.min.css" />
    <script src="style/jquery.min.js"></script>
	  <script src="style/jquery.ui.widget.js"></script>	
    <script src="style/metro.min.js"></script>
	  <link rel="stylesheet" href="highlight.css" />

	<meta name="generator" content="DocPad v6.60.4" />
	
    
	<style>
    header {
      height: 45px;
    }
    #content {
      overflow-y: scroll;
	  padding-right: 20px;
	  margin-left: 20px;
    }
    #sidebar {
      display: block;
      float: left;
      width: 300px;
      overflow-y: scroll;
      margin-right:20px;
    }
    body {
      overflow-y: hidden;
     }
	.metro h1 {
		color: #9a1616 !important;
	}	
	.metro .sidebar>ul ul, .metro .sidebar>ul ul li a {
		background-color: #3d3d3d;
		border: 0px;
		color: #fff;
	}
  </style>
    
	<script>
	function adjustHeight() {
		//adjust the height of the content and sidebar
		$("#content").outerHeight(window.innerHeight -45);
		$("#sidebar").outerHeight(window.innerHeight -45);
	}

    $(document).ready(function() {
		var path = window.location.pathname.replace("/scalejs/scalejs-docs/out","");
		
		//make selected page active on sidebar
		$("a[href='." + path +"']").parent().addClass("active");

		adjustHeight();
		$(window).resize(adjustHeight);

		//create code highlighting
		$('pre').each(function() {
			$(this).html($(this).html().replace(/!!\*/g, "<i style='background-color:#FFFF99'>").replace(/\*\*!/g, "</i>"));
		});

		console.log(path);
		//expand grid if it is grid
		if(path === '/grid1.html' || path === '/grid2.html' || path=='/grid3.html') $('#grid-dropdown').css("display","block");
    });

  </script>
</head>
<body class="metro">

  <header>
	  <nav class="navigation-bar dark fixed-top">
    <div class="navigation-bar-content">
        <a href="./" class="element"><span class="icon-home"></span> SCALEJS</a>
        <span class="element-divider"></span>

        <a class="element1 pull-menu" href="#"></a>

        <ul class="element-menu no-desktop">
            <li>
                <a class="dropdown-toggle" href="#"><span class="icon-layers"></span> Docs</a>
                <ul class="dropdown-menu dark" data-role="dropdown">
                    <li>
                        <a href="#" class="dropdown-toggle">Getting Started</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./docs.html"><i class="icon-star-3"></i> Introduction</a></li>
                            <li><a href="./install.html"><i class="icon-download-2"></i> Install Scalejs</a></li>
                            <li><a href="./project.html"><i class="icon-new"></i> Create an Application Project</a></li>
                            <!--<li><a href="./build.html"><i class="icon-cloud"></i> Build and Deployment</a></li>
                            <li><a href="./test.html"><i class="icon-checkmark"></i> Testing</a></li>
                            <li><a href="./best.html"><i class="icon-thumbs-up"></i> Best Practices</a></li>-->
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">Overview</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./template.html"><i class="icon-clipboard-2"></i> Project Template</a></li>
                            <li><a href="./architecture.html"><i class="icon-puzzle"></i> Architecture</a></li>
                            <li><a href="./mvvm.html"><i class="icon-tree-view"></i> Model-View-ViewModel</a></li>
                            <li><a href="./statechart.html"><i class="icon-tab"></i> Statechart</a></li>
                            <li><a href="./routing.html"><i class="icon-share"></i> Routing</a></li>
                            <li><a href="./composition.html"><i class="icon-screen"></i> UI Composition</a></li>
                            <li><a href="./gridlayout.html"><i class="icon-grid-view"></i> Grid Layout</a></li>
                            <!-- <li><a href="./styles.html"><i class="icon-droplet"></i> Styles</a></li>
                            <li><a href="./extensions.html"><i class="icon-wrench"></i> Extensions</a></li>
                            <li><a href="./api.html"><i class="icon-book"></i> API Documentation</a></li>-->
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">UI Components</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li>
                                <a class="dropdown-toggle" href=""><i class="icon-grid"></i> Grid</a>
                                <ul class="dropdown-menu" data-role="dropdown">
                                    <li><a href="./grid1.html">Introduction</a></li>
                                    <li><a href="./grid2.html">Filtering</a></li>
                                    <li><a href="./grid3.html">Sorting</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">Tutorials</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./todomvc.html">ToDoMVC</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="divider"></li>
            <li><a title="Visual Studio Gallery" href="http://visualstudiogallery.msdn.microsoft.com/2a3d0050-ccab-458f-8bfc-2f2aca73e631"><span class="icon-box-add"></span> Visual Studio</a></li>
            <li class="divider"></li>
            <li><a title="GitHub" href="https://github.com/lisovin/scalejs/tree/master"><span class="icon-github-3"></span> GitHub</a></li>
        </ul>

        <div class="no-tablet-portrait no-phone">
            <a href="./docs.html" class="element"><span class="icon-layers"></span> Docs</a>
            <span class="element-divider"></span>

            <a title="Visual Studio Gallery" href="http://visualstudiogallery.msdn.microsoft.com/2a3d0050-ccab-458f-8bfc-2f2aca73e631" class="element place-right"><span class="icon-box-add"></span> Visual Studio</a>
            <span class="element-divider place-right"></span>

            <a title="GitHub" href="https://github.com/lisovin/scalejs/tree/master" class="element place-right"><span class="icon-github-3"></span> GitHub</a>
            <span class="element-divider place-right"></span>
        </div>
    </div>
</nav>
  </header>
  
  <div id="container">
     
       <div id="sidebar" class="sidebar no-tablet-portrait no-phone">
		      <ul>
			      <li class="title">Getting Started</li>
				      <li><a href="./docs.html"><i class="icon-star-3"></i> Introduction</a></li>
				      <li><a href="./install.html"><i class="icon-download-2"></i> Install Scalejs</a></li>
				      <li><a href="./project.html"><i class="icon-new"></i> Create an Application Project</a></li>
                            <!--<li><a href="./build.html"><i class="icon-cloud"></i> Build and Deployment</a></li>
                            <li><a href="./test.html"><i class="icon-checkmark"></i> Testing</a></li>
                            <li><a href="./best.html"><i class="icon-thumbs-up"></i> Best Practices</a></li>-->
			      <li class="title">Overview</li>
                            <li><a href="./template.html"><i class="icon-clipboard-2"></i> Project Template</a></li>
                            <li><a href="./architecture.html"><i class="icon-puzzle"></i> Architecture</a></li>
                            <li><a href="./mvvm.html"><i class="icon-tree-view"></i> Model-View-ViewModel</a></li>
                            <li><a href="./statechart.html"><i class="icon-tab"></i> Statechart</a></li>
                            <li><a href="./routing.html"><i class="icon-share"></i> Routing</a></li>
                            <li><a href="./composition.html"><i class="icon-screen"></i> UI Composition</a></li>
                            <li><a href="./gridlayout.html"><i class="icon-grid-view"></i> Grid Layout</a></li>
                            <!--<li><a href="./styles.html"><i class="icon-droplet"></i> Styles</a></li>
                            <li><a href="./extensions.html"><i class="icon-wrench"></i> Extensions</a></li>
                            <li><a href="./api.html"><i class="icon-book"></i> API Documentation</a></li>-->
				  <li class="title">UI Components</li>
				            <li>
								<a class="dropdown-toggle" href=""><i class="icon-grid"></i> Grid</a>
								<ul id="grid-dropdown" class="dropdown-menu" data-role="dropdown">
									<li><a href="./grid1.html">Introduction</a></li>
									<li><a href="./grid2.html">Filtering</a></li>
									<li><a href="./grid3.html">Sorting</a></li>
								</ul>
							</li>
			      <li class="title">Tutorials</li>
				      <li><a href="./todomvc.html">ToDoMVC</a></li>
		      </ul>
	      </div>

	    <div id="content">
		    <p><link href="grid/slick/slick.grid.css" rel="stylesheet" type="text/css" /></p>
<p><link href="grid/slick/slick-default-theme.css" rel="stylesjeet" type="text/css" /></p>
<p><script src="grid/Grid-1.0.3.min.js" type="text/javascript"></script></p>
<h1 id="grid-sorting">Grid Sorting</h1>
<hr>

<p><a href="http://scalejs.com/scalejs-examples/Grid/">Grid Live Sample</a> |
<a href="https://github.com/lisovin/scalejs-examples/tree/master/Grid">Grid on GitHub</a></p>
<hr>

<p>The sorting tutorial will show you how to add sorting to your grid.
This tutorial is a continuation of the previous tutorial on <a href="./grid2.html">grid filtering</a>.
You can implement either <a href="./grid3.html#default-sorting">default sorting</a> or <a href="./grid3.html#viewmodel-sorting">viewmodel sorting</a>.
These two sections add on to the <a href="https://github.com/lisovin/scalejs-examples/tree/grid-2a/Grid">default filtered grid</a>
or the <a href="https://github.com/lisovin/scalejs-examples/tree/grid-2b/Grid">viewmodel filtered grid</a> respectively.</p>
<p><br></p>
<h2 id="sorting-overview">Sorting Overview</h2>
<p>Sorting your data is much more simple and straight forward than filtering.
By adding sorting, you can do the following:</p>
<ul>
<li>To sort a column, click on the header of the column. This will sort it either by Ascending or Descending. 
Click on it once again to sort it in the opposite direction.</li>
<li>You can set which columns, by default, will be sorted and in which direction upon initialization.</li>
<li>You can enable multi-column sort, which will alow you to sort your data by one column and then by another one.
Multiple columns can be sorted by holding the <strong>shift</strong> key when clicking on the column headers to sort then.</li>
</ul>
<p><br></p>
<h2 id="default-sorting">Default Sorting</h2>
<p>Default sorting is provided by the grid if you do not wish to use your own sorting. 
This section ads on to the <a href="https://github.com/lisovin/scalejs-examples/tree/grid-2a/Grid">grid</a> you created in the <a href="./grid2.html#default-filtering">default filtering</a> tutorial.
You can view this code on <a href="https://github.com/lisovin/scalejs-examples/tree/grid-3a/Grid">github</a>
or clone <a href="https://github.com/lisovin/scalejs-examples">scalejs-examples repository</a> and running the following command:</p>
<p><code>git checkout grid-3a</code></p>
<p><br></p>
<h3 id="bindings">Bindings</h3>
<p>The first change you need to make is in the bindings. Modify the bindings so there is a <code>sorting</code> property exposed.
This can be bound to <strong>true</strong> for default sorting, but the downside to that is you cannot specify the initial sort
or modify the sorted columns from the ViewModel. In our example, we will bind it to a <code>sorting</code> observable in the ViewModel.</p>
<p>Optionally, you can set the <code>multiColumnSort</code> property to true to enable the ability to sort multiple columns.</p>
<h5 id="example-changing-the-bindings-mainbindings-js-https-github-com-lisovin-scalejs-examples-blob-grid-3a-grid-app-main-bindings-mainbindings-js-">Example: changing the bindings (<a href="https://github.com/lisovin/scalejs-examples/blob/grid-3a/Grid/app/main/bindings/mainBindings.js">mainBindings.js</a>)</h5>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">/*global define */</span>
<span class="hljs-comment">/*jslint sloppy: true*/</span>
define({
    <span class="hljs-string">'main-grid'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">return</span> {
            slickGrid: {
                columns: <span class="hljs-keyword">this</span>.columns,
                itemsSource: <span class="hljs-keyword">this</span>.itemsSource,
                enableColumnReorder: <span class="hljs-literal">false</span>,
                forceFitColumns: <span class="hljs-literal">true</span>,
                rowHeight: <span class="hljs-number">40</span>,
                showHeaderRow: <span class="hljs-literal">true</span>!!*,
                sorting: <span class="hljs-keyword">this</span>.sorting,
                multiColumnSort: <span class="hljs-literal">true</span>**!
            }
        };
    }
});
</code></pre>
<h3 id="viewmodel">ViewModel</h3>
<p>In our ViewModel, we need to do 2 things. First, we must expose the observable we bound to the <code>sorting</code> property in the bindings.
Second, we must add <code>sortable: true</code> to all the columns we wish to be sortable. In this example, we wanted all of the columns to be sortable
so we iterated through each one using <code>forEach</code> and added the property there. We also set an initial sort order in the <code>sorting</code> observable. </p>
<h5 id="example-changing-the-viewmodel-mainviewmodel-js-https-github-com-lisovin-scalejs-examples-blob-grid-3a-grid-app-main-viewmodels-mainviewmodel-js-">Example: changing the ViewModel (<a href="https://github.com/lisovin/scalejs-examples/blob/grid-3a/Grid/app/main/viewmodels/mainViewModel.js">mainViewModel.js</a>)</h5>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">/*global define */</span>
define([
    <span class="hljs-string">'sandbox!main'</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(
    sandbox
)</span> {</span>
<span class="hljs-pi">    'use strict'</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> <span class="hljs-comment">// imports</span>
            observableArray = sandbox.mvvm.observableArray,
            observable = sandbox.mvvm.observable,
            ajaxGet = sandbox.ajax.jsonpGet,
            <span class="hljs-comment">// vars</span>
            columns,
            itemsSource = observableArray()!!*,
            sorting = observable({ Symbol: <span class="hljs-literal">true</span> });**!

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">moneyFormatter</span><span class="hljs-params">(m)</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(m).toFixed(<span class="hljs-number">2</span>);
        }

        columns = [
            { id: <span class="hljs-string">"Symbol"</span>, field: <span class="hljs-string">"Symbol"</span>, name: <span class="hljs-string">"Symbol"</span>, minWidth: <span class="hljs-number">75</span>, filter: { type: <span class="hljs-string">'string'</span> } },
            { id: <span class="hljs-string">"Name"</span>, field: <span class="hljs-string">"Name"</span>, name: <span class="hljs-string">"Name"</span>, minWidth: <span class="hljs-number">300</span>, filter: { type: <span class="hljs-string">'string'</span>, quickFilterOp: <span class="hljs-string">'Contains'</span> } },
            { id: <span class="hljs-string">"LastSale"</span>, field: <span class="hljs-string">"LastSale"</span>, name: <span class="hljs-string">"Last Sale"</span>, cssClass: <span class="hljs-string">"money"</span>, minWidth: <span class="hljs-number">100</span>, filter: { type: <span class="hljs-string">'number'</span> } },
            { id: <span class="hljs-string">"MarketCap"</span>, field: <span class="hljs-string">"MarketCap"</span>, name: <span class="hljs-string">"Market Cap"</span>, cssClass: <span class="hljs-string">"money"</span>, minWidth: <span class="hljs-number">150</span>, filter: { type: <span class="hljs-string">'mumber'</span> } },
            { id: <span class="hljs-string">"Sector"</span>, field: <span class="hljs-string">"Sector"</span>, name: <span class="hljs-string">"Sector"</span>, minWidth: <span class="hljs-number">150</span>, filter: { type: <span class="hljs-string">'string'</span> } },
            { id: <span class="hljs-string">"Industry"</span>, field: <span class="hljs-string">"industry"</span>, name: <span class="hljs-string">"Industry"</span>, minWidth: <span class="hljs-number">350</span>, filter: { type: <span class="hljs-string">'string'</span>, quickFilterOp: <span class="hljs-string">'Contains'</span> } }];


        !!*columns.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(c)</span> {</span>
            c.sortable = <span class="hljs-literal">true</span>;
        });**!

        ajaxGet(<span class="hljs-string">'./companylist.txt'</span>, {}).subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data)</span> {</span>
            itemsSource(<span class="hljs-built_in">JSON</span>.parse(data).map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(company)</span> {</span>
                <span class="hljs-comment">// money formatter</span>
                company.LastSale = moneyFormatter(company.LastSale);
                company.MarketCap = moneyFormatter(company.MarketCap);
                <span class="hljs-keyword">return</span> company;
            }));
        });

        <span class="hljs-keyword">return</span> {
            columns: columns,
            itemsSource: itemsSource!!*,
            sorting: sorting**!
        };
    };
});
</code></pre>
<p><br></p>
<h2 id="sorting-images-and-styles">Sorting Images and Styles</h2>
<p>Include the images for the ascending and descending arrows can be found in the grid styles, <a href="https://github.com/lisovin/scalejs-examples/tree/grid-3a/Grid/css/slick/images">here</a>.
Update your <a href="https://github.com/lisovin/scalejs-examples/blob/grid-3a/Grid/app/main/styles/main.less">main.less</a> file so that it contains styles for grids.</p>
<p><br></p>
<h2 id="result">Result</h2>
<p>Here is the result of those changes.</p>
<div id="grid1" style="width:100%;height:600px"></div>
	    </div>

  </div>
</div>
    
</body>
</html>