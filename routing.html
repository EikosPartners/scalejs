<!DOCTYPE html>
<html>
<head>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="stylesheet" href="style/metro-bootstrap.min.css" />
	  <link rel="stylesheet" href="style/metro-bootstrap-responsive.min.css" />
    <script src="style/jquery.min.js"></script>
	  <script src="style/jquery.ui.widget.js"></script>	
    <script src="style/metro.min.js"></script>
	  <link rel="stylesheet" href="highlight.css" />

	<meta name="generator" content="DocPad v6.60.3" />
	
    
	<style>
    header {
      height: 45px;
    }
    #content {
      overflow-y: scroll;
	  padding-right: 20px;
	  margin-left: 20px;
    }
    #sidebar {
      display: block;
      float: left;
      width: 300px;
      overflow-y: scroll;
      margin-right:20px;
    }
    body {
      overflow-y: hidden;
     }
	.metro h1 {
		color: #9a1616 !important;
	}	
	.metro .sidebar>ul ul, .metro .sidebar>ul ul li a {
		background-color: #3d3d3d;
		border: 0px;
		color: #fff;
	}
  </style>
    
	<script>
	function adjustHeight() {
		//adjust the height of the content and sidebar
		$("#content").outerHeight(window.innerHeight -45);
		$("#sidebar").outerHeight(window.innerHeight -45);
	}

    $(document).ready(function() {
		var path = window.location.pathname.replace("/scalejs/scalejs-docs/out","");
		
		//make selected page active on sidebar
		$("a[href='." + path +"']").parent().addClass("active");

		adjustHeight();
		$(window).resize(adjustHeight);

		//create code highlighting
		$('pre').each(function() {
			$(this).html($(this).html().replace(/!!\*/g, "<i style='background-color:#FFFF99'>").replace(/\*\*!/g, "</i>"));
		});
		
		//if path contains grid then open the link
		if(/grid\d/.test(path)) {
			$('.icon-grid').click();
		}
    });

  </script>
</head>
<body class="metro">

  <header>
	  <nav class="navigation-bar dark fixed-top">
    <div class="navigation-bar-content">
        <a href="./" class="element"><span class="icon-home"></span> SCALEJS</a>
        <span class="element-divider"></span>

        <a class="element1 pull-menu" href="#"></a>

        <ul class="element-menu no-desktop">
            <li>
                <a class="dropdown-toggle" href="#"><span class="icon-layers"></span> Docs</a>
                <ul class="dropdown-menu dark" data-role="dropdown">
                    <li>
                        <a href="#" class="dropdown-toggle">Getting Started</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./docs.html"><i class="icon-star-3"></i> Introduction</a></li>
                            <li><a href="./install.html"><i class="icon-download-2"></i> Install Scalejs</a></li>
                            <li><a href="./project.html"><i class="icon-new"></i> Create an Application Project</a></li>
                            <!--<li><a href="./build.html"><i class="icon-cloud"></i> Build and Deployment</a></li>
                            <li><a href="./test.html"><i class="icon-checkmark"></i> Testing</a></li>
                            <li><a href="./best.html"><i class="icon-thumbs-up"></i> Best Practices</a></li>-->
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">Overview</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./template.html"><i class="icon-clipboard-2"></i> Project Template</a></li>
                            <li><a href="./architecture.html"><i class="icon-puzzle"></i> Architecture</a></li>
                            <li><a href="./mvvm.html"><i class="icon-tree-view"></i> Model-View-ViewModel</a></li>
                            <li><a href="./statechart.html"><i class="icon-tab"></i> Statechart</a></li>
                            <li><a href="./routing.html"><i class="icon-share"></i> Routing</a></li>
                            <li><a href="./composition.html"><i class="icon-screen"></i> UI Composition</a></li>
                            <li><a href="./gridlayout.html"><i class="icon-grid-view"></i> Grid Layout</a></li>
                            <!-- <li><a href="./styles.html"><i class="icon-droplet"></i> Styles</a></li>
                            <li><a href="./extensions.html"><i class="icon-wrench"></i> Extensions</a></li>
                            <li><a href="./api.html"><i class="icon-book"></i> API Documentation</a></li>-->
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">UI Components</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li>
                                <a class="dropdown-toggle" href=""><i class="icon-grid"></i> Grid</a>
                                <ul class="dropdown-menu" data-role="dropdown">
                                    <li><a href="./grid1.html">Introduction</a></li>
                                    <li><a href="./grid2.html">Filtering</a></li>
                                    <li><a href="./grid3.html">Sorting</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="dropdown-toggle">Tutorials</a>
                        <ul class="dropdown-menu dark" data-role="dropdown">
                            <li><a href="./todomvc.html">ToDoMVC</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="divider"></li>
            <li><a title="Visual Studio Gallery" href="http://visualstudiogallery.msdn.microsoft.com/2a3d0050-ccab-458f-8bfc-2f2aca73e631"><span class="icon-box-add"></span> Visual Studio</a></li>
            <li class="divider"></li>
            <li><a title="GitHub" href="https://github.com/lisovin/scalejs/tree/master"><span class="icon-github-3"></span> GitHub</a></li>
        </ul>

        <div class="no-tablet-portrait no-phone">
            <a href="./docs.html" class="element"><span class="icon-layers"></span> Docs</a>
            <span class="element-divider"></span>

            <a title="Visual Studio Gallery" href="http://visualstudiogallery.msdn.microsoft.com/2a3d0050-ccab-458f-8bfc-2f2aca73e631" class="element place-right"><span class="icon-box-add"></span> Visual Studio</a>
            <span class="element-divider place-right"></span>

            <a title="GitHub" href="https://github.com/lisovin/scalejs/tree/master" class="element place-right"><span class="icon-github-3"></span> GitHub</a>
            <span class="element-divider place-right"></span>
        </div>
    </div>
</nav>
  </header>
  
  <div id="container">
     
       <div id="sidebar" class="sidebar no-tablet-portrait no-phone">
		      <ul>
			      <li class="title">Getting Started</li>
				      <li><a href="./docs.html"><i class="icon-star-3"></i> Introduction</a></li>
				      <li><a href="./install.html"><i class="icon-download-2"></i> Install Scalejs</a></li>
				      <li><a href="./project.html"><i class="icon-new"></i> Create an Application Project</a></li>
                            <!--<li><a href="./build.html"><i class="icon-cloud"></i> Build and Deployment</a></li>
                            <li><a href="./test.html"><i class="icon-checkmark"></i> Testing</a></li>
                            <li><a href="./best.html"><i class="icon-thumbs-up"></i> Best Practices</a></li>-->
			      <li class="title">Overview</li>
                            <li><a href="./template.html"><i class="icon-clipboard-2"></i> Project Template</a></li>
                            <li><a href="./architecture.html"><i class="icon-puzzle"></i> Architecture</a></li>
                            <li><a href="./mvvm.html"><i class="icon-tree-view"></i> Model-View-ViewModel</a></li>
                            <li><a href="./statechart.html"><i class="icon-tab"></i> Statechart</a></li>
                            <li><a href="./routing.html"><i class="icon-share"></i> Routing</a></li>
                            <li><a href="./composition.html"><i class="icon-screen"></i> UI Composition</a></li>
                            <li><a href="./gridlayout.html"><i class="icon-grid-view"></i> Grid Layout</a></li>
                            <!--<li><a href="./styles.html"><i class="icon-droplet"></i> Styles</a></li>
                            <li><a href="./extensions.html"><i class="icon-wrench"></i> Extensions</a></li>
                            <li><a href="./api.html"><i class="icon-book"></i> API Documentation</a></li>-->
				  <li class="title">UI Components</li>
				            <li>
								<a class="dropdown-toggle" href=""><i class="icon-grid"></i> Grid</a>
								<ul class="dropdown-menu" data-role="dropdown">
									<li><a href="./grid1.html">Introduction</a></li>
									<li><a href="./grid2.html">Filtering</a></li>
									<li><a href="./grid3.html">Sorting</a></li>
								</ul>
							</li>
			      <li class="title">Tutorials</li>
				      <li><a href="./todomvc.html">ToDoMVC</a></li>
		      </ul>
	      </div>

	    <div id="content">
		    <h1 id="routing">Routing</h1>
<p><hr>
Routing is an essential aspect of any Single Page Application, but it is not always the easiest thing to implement.
This is why statechart-integrated routing makes it very convienient to code your app without routing in mind, and drop it in
when you feel like you need it.</p>
<p>Routing allows you to give states their own URL so that users of you app can bookmark or link others to these states.
This gives the appearance of having distinct pages for certain states, without the need to retrieve a new page from the server.</p>
<p><br></p>
<h2 id="routerstate">routerState</h2>
<p>To enable routing in your app, you need to specify which state will be your router state.
The router state is an ancestor to all routable states. This could be your <code>main</code> or <code>app</code> state for example.</p>
<p>After deciding on which state will be the router state, simply change the <code>state()</code> builder to
<code>routerState()</code> builder.</p>
<h5 id="example-declaring-the-routerstate-of-your-app">Example: Declaring the routerState of your app</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>));
</code></pre>
<p><br></p>
<h3 id="baseurl">baseUrl</h3>
<p>There are situations where the root of your app is not in the root of your domain. (e.g. <a href="http://yourapp.com">http://yourapp.com</a>)
For example, if you are building a marketplace app, you might place the app in a directory called &#39;<em>store</em>&#39; (e.g. <a href="http://yourapp.com/store">http://yourapp.com/store</a>)
In this situation, the second parameter of the <code>routerState</code> function needs to be an options object specifying the baseUrl.</p>
<h5 id="example-specifying-a-baseurl-for-your-app-">Example: Specifying a baseUrl for your app.</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>, { baseUrl: <span class="hljs-string">'store'</span> }));
</code></pre>
<p><br></p>
<h2 id="route">route</h2>
<p>To make a specific state routable, you must pass the <code>route()</code> builder function to the <code>state()</code> builder.
There are many ways to specify a route for a state. Remember that the state which recieves the <code>route()</code>
builder must be a descendant of a state created using the <code>routerState()</code> builder.</p>
<p><br></p>
<h3 id="root">Root</h3>
<p>When you open your application without a URL, the router needs to know which state should be shown.
This is known as the <strong>root</strong> of you application. The to make a state the root, you need to pass <code>router(&#39;/&#39;)</code> to the <code>state()</code> builder.</p>
<h5 id="example-declaring-the-root-state">Example: Declaring the root state</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>,
    state(<span class="hljs-string">'a'</span>, route(<span class="hljs-string">'/'</span>))));
</code></pre>
<p><br></p>
<h3 id="a-static-route-url">A Static Route URL</h3>
<p>There are many different ways to specify a route.
The most simple way to do this is to specify a static name for the route.
An example of a URL created with a static name would be <a href="http://yourapp.com/?b">http://yourapp.com/?b</a>.</p>
<h5 id="example-creating-a-static-route">Example: Creating a static route</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>,
    state(<span class="hljs-string">'a'</span>, route(<span class="hljs-string">'/'</span>)),
    state(<span class="hljs-string">'b'</span>, route(<span class="hljs-string">'b'</span>))));
</code></pre>
<p><br></p>
<h3 id="a-dynamic-route-url">A Dynamic Route URL</h3>
<p>In some situations, you would like to pass some data to the routed state depending on the URL.
An example of this would be a state that expects an <code>id</code> to be specifed when it is entered.
In this situation, if the id is 1, the url would be <a href="http://yourapp.com/?b/1">http://yourapp.com/?b/1</a>, but if the
id is 2, then the url would be <a href="http://yourapp.com/?b/2">http://yourapp.com/?b/2</a>.</p>
<p>In this situation, you need to specify in the <code>route()</code> string as before, except with an aditional <code>&#39;/{id}&#39;</code>
at the end so that the router knows to expect a value after <code>&#39;b/&#39;</code> that will be a part of the event data.</p>
<h5 id="example-creating-a-dynamic-route">Example: Creating a dynamic route</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>,
    state(<span class="hljs-string">'a'</span>, route(<span class="hljs-string">'/'</span>)),
    state(<span class="hljs-string">'b'</span>, 
        route(<span class="hljs-string">'b/{id}'</span>),
        onEntry(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
            console.log(e.data.id);
        }))));
</code></pre>
<p>If internally you are navigating to this state, you must pass the value when you call <code>raise()</code> or else the <code>id</code> in your URL will be undefined.</p>
<h5 id="example-navigating-to-a-dynamic-route-using-raise">Example: Navigating to a dynamic route using raise</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>,
    state(<span class="hljs-string">'a'</span>, 
        route(<span class="hljs-string">'/'</span>),
        on(<span class="hljs-string">'b.open'</span>, goto(<span class="hljs-string">'b'</span>))),
    state(<span class="hljs-string">'b'</span>, 
        route(<span class="hljs-string">'b/{id}'</span>),
        onEntry(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
            console.log(e.data.id);
        }))));

raise(<span class="hljs-string">'b.open'</span>, { id: <span class="hljs-number">1</span> });
</code></pre>
<p>If you use the URL <a href="http://yourapp.com/?b/1">http://yourapp.com/?b/1</a> to navigate to your app, the event data will automatically contain the id.</p>
<p>Dynamic routes can go as many levels deep as you need. For example, if you would like to pass additional data
when routing to your app, you can specify the url as <a href="http://yourapp.com/?b/1/2">http://yourapp.com/?b/1/2</a>.</p>
<h5 id="example-creating-a-dynamic-route-with-more-than-1-parameter">Example: Creating a dynamic route with more than 1 parameter</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>,
    state(<span class="hljs-string">'a'</span>, route(<span class="hljs-string">'/'</span>)),
    state(<span class="hljs-string">'b'</span>, 
        route(<span class="hljs-string">'b/{x}/{y}'</span>),
        onEntry(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
            console.log(e.data.x); <span class="hljs-comment">//1</span>
            console.log(e.data.y); <span class="hljs-comment">//2 </span>
        }))));
</code></pre>
<p><br></p>
<h3 id="a-route-url-with-paremeters">A route URL with paremeters</h3>
<p>In addition to the syntax <a href="http://yourapp.com/?b/{id}">http://yourapp.com/?b/{id}</a>, you can also specify the parameter in the following manner:
<a href="http://yourapp.com/?b?id={id}">http://yourapp.com/?b?id={id}</a>.</p>
<h5 id="example-creating-a-route-that-expects-a-named-parameter">Example: Creating a route that expects a named parameter</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>,
    state(<span class="hljs-string">'a'</span>, route(<span class="hljs-string">'/'</span>)),
    state(<span class="hljs-string">'b'</span>, 
        route(<span class="hljs-string">'b?x={x}'</span>),
        onEntry(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
            console.log(e.data.x);
        }))));
</code></pre>
<p>Like the dynamic route path, you can specify as many parameters as you would like.</p>
<h5 id="example-creating-a-route-that-expects-a-more-than-1-named-parameter">Example: Creating a route that expects a more than 1 named parameter</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>,
    state(<span class="hljs-string">'a'</span>, route(<span class="hljs-string">'/'</span>)),
    state(<span class="hljs-string">'b'</span>, 
        route(<span class="hljs-string">'b?x={x}&amp;y={y}'</span>),
        onEntry(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
            console.log(e.data.x);
            console.log(e.data.y);
        }))));
</code></pre>
<p>You can also combine dynamic paths and parameters to create complex URLs</p>
<h5 id="example-creating-a-dynamic-route-that-expects-parameters">Example: Creating a dynamic route that expects parameters</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>,
    state(<span class="hljs-string">'a'</span>, route(<span class="hljs-string">'/'</span>)),
    state(<span class="hljs-string">'b'</span>, 
        route(<span class="hljs-string">'b/{x}?y={y}'</span>),
        onEntry(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
            console.log(e.data.x);
            console.log(e.data.y);
        }))));
</code></pre>
<p>Dynamic routes and parameterized routes both have their own use cases. 
The former is useful for clean urls.
The latter is useful for making it clear exactly which properties will be expecting values.</p>
<p><br></p>
<h2 id="routing-expectations">Routing Expectations</h2>
<p>There is one routing expectation which must be known as it is non-obvious but makes sense once it is explained.
Due to the nature of routing&#39;s implementation, you may easily make the mistake of giving a descendant of a routed state
a route itself.</p>
<h5 id="example-incorrect-usage-of-routing">Example: Incorrect usage of routing</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>
    state(<span class="hljs-string">'main'</span>,
        route(<span class="hljs-string">'/'</span>),
        state(<span class="hljs-string">'a'</span>),
        state(<span class="hljs-string">'b'</span>, route(<span class="hljs-string">'b'</span>)))));
</code></pre>
<p>In this situation, you might expect the root to be routed to state <strong>a</strong>
and when the url for state <strong>b</strong> is entered, to be routed to state <strong>b</strong>.</p>
<p>In this case, it is entirely unclear which state is <em>actually</em> the root state, since both state <strong>a</strong> and <strong>b</strong> are children
of the state routed to root.</p>
<p>In order to fix this, if need to explicitly define which child state of &#39;main&#39; is the root. </p>
<h5 id="example-correct-usage-of-routing">Example: Correct usage of routing</h5>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> routerState = sandbox.routing.routerState,
    route = sandbox.routing.route;

registerStates(<span class="hljs-string">'root'</span>, routerState(<span class="hljs-string">'app'</span>
    state(<span class="hljs-string">'main'</span>,
        state(<span class="hljs-string">'a'</span>, route(<span class="hljs-string">'/'</span>)),
        state(<span class="hljs-string">'b'</span>, route(<span class="hljs-string">'b'</span>)))));
</code></pre>
<p><br></p>
<h2 id="summary">Summary</h2>
<ul>
<li>Routing is easily implemented due to it being integrated with the statechart</li>
<li>Routed states must be descendants of the <code>routerState()</code></li>
<li>Routed states must be passed the <code>route()</code> builder</li>
<li>The root of your app must be specified with <code>route(&#39;/&#39;)</code></li>
<li>Dynamic and parameterized routes can be specified so states can recieve data</li>
<li>Routed states must not be descendants of a routed state due to ambiguity</li>
</ul>

	    </div>

  </div>
</div>
    
</body>
</html>